@page "/travel-package-hotels"
@using Shared.Models
@using TravelFusionLean.Components.Layout.Admin
@layout AdminLayout
@inject NavigationManager NavigationManager
@rendermode InteractiveServer
@inject IHotelApiService HotelApiService

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"/>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<link href="css/CustomColors.css" rel="stylesheet" />

<div class="container mt-4">
    <h2 class="text-center">Choose Hotel</h2>
    
    <div class="card p-3 mb-3-3">
        <div class="row">
            <div class="col-md-3">
                <label>Location</label>
                <input type="text" class="form-control" placeholder="Enter location of hotel"/>
            </div>
            <!-- Yderligere informationer til s√∏gning af hotel -->
            <div class="col-md-3">
                <label>When:</label>
                <input type="text" class="form-control" placeholder="Select dates"/>
            </div>
            <div class="col-md-3">
                <label>Travellers:</label>
                <input type="text" class="form-control" placeholder="Enter number of travelers"/>
            </div>
            <div class="col-md-2">
                <label>Rooms:</label>
                <input type="text" class="form-control" placeholder="Number of rooms"/>
            </div>
            <div class="col-md-1 d-flex align-items-end">
                <button class="btn btn-primary w-100">üîç</button>
            </div>
        </div>


        <!-- Muligheder for at v√¶lge billig, hurtig eller bedst (kombination) -->
        <ul class="nav nav-tabs">
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#fastest" role="tab">Fastest</a>
            </li>
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#cheapest" role="tab">Cheapest</a>
            </li>
            <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#best" role="tab">Best</a>
            </li>
        </ul>

        
        <div class="tab-content">
            <div id="fastest" class="tab-pane fade show active p-3">
                <div class="d-flex justify-content-between border p-2">
                    <div><strong>DATA</strong> @if (hotelStays != null)
                                               {
                                                   @foreach (var stay in hotelStays)
                                                   {
                                                       <div class="d-flex justify-content-between border p-2 mb-2">
                                                           <div>
                                                               <strong>@stay.Hotel?.Name</strong><br />
                                                               @stay.Hotel?.Address<br />
                                                               @stay.Hotel?.Description<br />
                                                               @stay.CheckInDate.ToShortDateString() - @stay.CheckOutDate.ToShortDateString()<br />
                                                               <strong>@stay.Price @stay.Currency?.Name</strong>
                                                           </div>
                                                           <button class="btn btn-primary">Select</button>
                                                       </div>
                                                   }
                                               }
                    </div>
                    <button class="btn btn-primary">Select</button>
                </div>
            </div>
            <div id="cheapest" class="tab-pane fade show active p-3">
                <div class="d-flex justify-content-between border p-2">
                    <div><strong>DATA</strong> DATA DATA DATA</div>
                    <button class="btn btn-primary">Select</button>
                </div>
            </div>
            <div id="best" class="tab-pane fade show active p-3">
                <div class="d-flex justify-content-between border p-2">
                    <div><strong>DATA</strong> DATA DATA DATA</div>
                    <button class="btn btn-primary">Select</button>
                </div>
            </div>
        </div>

        
        <!-- Selected Hotel Summery -->
        @if (hotelStays != null && hotelStays.Any())
        {
            var selected = hotelStays.First();

            <div class="card mt-3 p-3">
                <h5>Hotel: @selected.Hotel?.Name</h5>
                <p>Description of hotel: @selected.Hotel?.Description</p>
                <p><strong>Total: @selected.Price @selected.Currency?.Name</strong></p>
                <button class="btn btn-primary">Choose Hotel</button>
            </div>
        }

    </div>
</div>


@code {
    private List<HotelStay>? hotelStays;

    protected override async Task OnInitializedAsync()
    {
        hotelStays = (await HotelApiService.GetAllHotelStaysAsync()).ToList();
    }
}
